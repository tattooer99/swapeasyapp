# Архитектура проекта SwapEasyApp

## Почему мы не используем официальный шаблон полностью?

Официальный шаблон [reactjs-template](https://github.com/Telegram-Mini-Apps/reactjs-template) от Telegram Mini Apps - отличный выбор для новых проектов, но мы решили использовать гибридный подход:

### Преимущества нашего подхода:

1. **Нативный Telegram WebApp API** - используем `window.Telegram.WebApp` напрямую
   - Не требует дополнительных зависимостей
   - Меньший размер бандла
   - Прямой доступ ко всем функциям Telegram
   - Работает везде, где доступен Telegram WebApp

2. **Мок для разработки** - автоматически создается в режиме разработки
   - Можно тестировать приложение в браузере без Telegram
   - Все функции доступны для разработки
   - Легко отлаживать

3. **Сохранена вся логика** - весь функционал уже реализован
   - Не нужно переносить код
   - Структура проекта уже настроена
   - Все компоненты и страницы готовы

### Что мы взяли из официального шаблона:

- ✅ Структура проекта (React + TypeScript + Vite)
- ✅ Подход к работе с Telegram API
- ✅ Идеи по организации кода

### Когда стоит использовать официальный шаблон:

Если вы начинаете проект с нуля и хотите:
- Использовать `@tma.js/sdk` для более удобной работы
- Иметь готовую структуру с примерами
- Использовать дополнительные утилиты из экосистемы tma.js

## Текущая архитектура

```
src/
├── components/       # Переиспользуемые UI компоненты
├── pages/           # Страницы приложения
├── hooks/           # React хуки (useTelegram, useSupabase)
├── supabase/        # Конфигурация Supabase
└── types/           # TypeScript типы
```

## Интеграция с Telegram

Мы используем нативный API через `window.Telegram.WebApp`:

```typescript
// Автоматически определяется в useTelegram хуке
const { user, webApp } = useTelegram()

// В режиме разработки создается мок
// В Telegram - используется реальный API
```

## Миграция на официальный шаблон (если нужно)

Если в будущем захотите использовать `@tma.js/sdk`:

1. Установите пакет:
   ```bash
   npm install @tma.js/sdk
   ```

2. Обновите `useTelegram.ts`:
   ```typescript
   import { initData, retrieveLaunchParams } from '@tma.js/sdk'
   ```

3. Замените использование `window.Telegram.WebApp` на методы из SDK

Но для текущего проекта это не обязательно - нативный API работает отлично!

